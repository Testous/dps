<html>
<head>
	<title> Test ui</title>
	<link rel="stylesheet" href="main.css" />
	<script>
	var x
	function xhr(url, cb) {
		x = new XMLHttpRequest();
		pending = true;
		x.open("GET", "api/" + url, true);
		x.onload = cb;
		x.send();
		return;
	}

	function refreshCB()
	{
		document.getElementById("content").innerHTML = this.responseText.replace(/(\\n|\"|\\)/gm,"");
	}

	function HistoryCB() {}
	function History() {
		xhr("H",HistoryCB)
	}
	function NoticeCB() {}
	function Notice() {
		xhr("N",NoticeCB)
	}

	function DebugCB() {}
	function Debug() {
		xhr("B",DebugCB)
	}

	function NoticeDamageCB() {
		//document.getElementById("NDV").value = this.responseText.replace(/(\")/gm,"");
	}

	function NoticeDamage() {
		xhr(document.getElementById("NDV").value + "D",NoticeDamageCB)
	}

	function NoticeDamageAdd() {
		xhr("A",NoticeDamageCB)
	}

	function validate(evt) {
  var theEvent = evt || window.event;
  var key = theEvent.keyCode || theEvent.which;
  key = String.fromCharCode( key );
  var regex = /[0-9]|\./;
  if( !regex.test(key) ) {
    theEvent.returnValue = false;
    if(theEvent.preventDefault) theEvent.preventDefault();
  }
}

	window.addEventListener('error', function(e) {
		_tera_client_proxy_.alert('Error: ' + e.message)
	})

	window.onload = function() {
		_tera_client_proxy_.resize_to(300, 200)
		_tera_client_proxy_.set_title('DPS')

		var counter = 0;
		var i = setInterval(function(){
		    // do your thing
				xhr("R",refreshCB)

		    counter++;
		    if(counter % 0) {
		        //clearInterval(i);
		    }
		}, 1000);

	}


	</script>
</head>
<body>
	<div  id="content" width=300 height=200></div >
		<button type="button" id="H" onclick="History()">History</button>
		<button type="button" id="N" onclick="Notice()">Notice</button>
		<!-- <input type="text" id="NDV" onkeypress='validate(event)' value="">
		<button type="button" id="ND" onclick="NoticeDamage()">ND</button> -->
		<button type="button" id="A" onclick="NoticeDamageAdd()">Notice value</button>
		<br><br><br><br>
		<button type="button" id="B" onclick="Debug()">Debug</button>
</body>
</html>
